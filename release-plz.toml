# release-plz configuration
# https://release-plz.ieni.dev/docs/config
#
# release-plz automates:
# 1. Version bumping based on conventional commits
# 2. Changelog generation
# 3. Release PR creation
# 4. Publishing to crates.io

[workspace]
# Use conventional commits to determine version bumps
# feat: -> minor, fix: -> patch, BREAKING CHANGE: -> major
semver_check = true

# Create changelog entries from conventional commits
changelog_update = true

# Create git tags (v0.4.0 format)
git_tag_enable = true
git_tag_name = "v{{ version }}"

# Don't create GitHub releases here - release-build.yml handles this
# (it attaches binary artifacts to the release)
git_release_enable = false

# PR settings
pr_draft = false
pr_labels = ["release"]

# Don't publish to crates.io from release-plz (handled by release-build.yml)
publish = false

# Allow releasing from main
allow_dirty = false

[changelog]
# Changelog header
header = """# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

"""

# Commit types to include in changelog
commit_parsers = [
  { message = "^feat", group = "Features" },
  { message = "^fix", group = "Bug Fixes" },
  { message = "^perf", group = "Performance" },
  { message = "^refactor", group = "Refactoring" },
  { message = "^doc", group = "Documentation" },
  { message = "^test", group = "Testing" },
  { message = "^chore\\(deps\\)", group = "Dependencies" },
  { message = "^chore", group = "Miscellaneous" },
]

# Exclude these from changelog
commit_preprocessors = [
  { pattern = "^chore: release", replace = "" },
]
