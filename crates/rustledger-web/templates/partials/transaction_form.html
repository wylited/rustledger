<div class="bg-white shadow rounded-lg dark:bg-gray-800 mb-8 border-t-4 border-primary">
    <div class="px-4 py-5 border-b border-gray-200 sm:px-6 dark:border-gray-700">
        <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">Add Transaction</h3>
        {% if account_name is defined %}
        <p class="mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400">Create a new transaction involving {{ account_name }}</p>
        {% else %}
        <p class="mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400">Create a new transaction</p>
        {% endif %}
    </div>
    <div class="px-4 py-5 sm:p-6">
        <form class="space-y-6" hx-post="/api/transactions" hx-swap="none" id="txn-form" _="on htmx:afterRequest reset() me">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Date -->
                <div>
                    <label for="date" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Date</label>
                    <input type="date" name="date" id="date" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border">
                    <script>
                        document.getElementById('date').valueAsDate = new Date();
                    </script>
                </div>
                
                <!-- Payee -->
                <div>
                    <label for="payee" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Payee (Optional)</label>
                    <input type="text" name="payee" id="payee" placeholder="e.g. Supermarket" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Narration -->
                <div>
                    <label for="narration" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Narration</label>
                    <input type="text" name="narration" id="narration" required placeholder="Description of the transaction" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border">
                </div>
                
                <!-- Status -->
                <div class="flex items-center pt-6">
                    <input type="checkbox" name="cleared" id="cleared" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" checked>
                    <label for="cleared" class="ml-2 block text-sm text-gray-900 dark:text-gray-300">
                        Cleared (*)
                    </label>
                </div>
            </div>

            <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
                <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-4">Postings</h4>
                
                <div class="space-y-4">
                    <!-- Posting 1 (Current Account) -->
                    <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-750 rounded-md">
                        <div class="flex-1">
                            <label class="block text-xs font-medium text-gray-500 uppercase">Account</label>
                            <select name="account_1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border">
                                {% for account in accounts %}
                                <option value="{{ account }}" {% if account_name is defined and account == account_name %}selected{% endif %}>{{ account }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="w-1/3">
                            <label class="block text-xs font-medium text-gray-500 uppercase">Amount</label>
                            <input type="text" name="amount_1" placeholder="-10.00 USD" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border">
                        </div>
                    </div>

                    <!-- Posting 2 -->
                    <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-750 rounded-md">
                        <div class="flex-1">
                            <label class="block text-xs font-medium text-gray-500 uppercase">Account</label>
                            <select name="account_2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border">
                                <option value="">Select Account...</option>
                                {% for account in accounts %}
                                <option value="{{ account }}">{{ account }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="w-1/3">
                            <label class="block text-xs font-medium text-gray-500 uppercase">Amount</label>
                            <input type="text" name="amount_2" placeholder="10.00 USD" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border">
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex justify-end pt-4">
                <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                    Post Transaction
                </button>
            </div>
        </form>
    </div>
</div>